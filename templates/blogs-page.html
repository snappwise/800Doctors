{%load static%}
{% load custom_filters %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" />
    {% include 'favicon.html' %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="{% static 'stylesheets/output.css' %}">
    <title>Blogs</title>
</head>

<body>
    {% include 'gabody.html' %}
    {% include 'alerts.html' %}

    {% include 'whatsapp.html' %}

    {% include 'navbar.html' %}
    <section id="blogPage" class="pt-16 lg:pt-20">
        <div class="section-container">
            <div class="section-header">
                <h2 class="section-heading text-center">Latest News And Blogs</h2>
                <p>The latest industry news , interviews , technologies and resources</p>
            </div>
            <div id="blog-container" class="more-blogs-container">
                
            </div>

            <nav aria-label="pagination" class="mt-20 mx-auto w-fit">
                <ul id="pagination-container" class="pagination-container">
                    
                </ul>
            </nav>
        </div>
    </section>

    <script>
        const blogData = [
            { id: 1, title: 'Designing for the Future', category: 'Design', author: 'Jon Snow', date: '20 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore, officiis!' },
            { id: 2, title: 'The Art of Web Development', category: 'Tech', author: 'Arya Stark', date: '21 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Lorem ipsum dolor sit amet consectetur.' },
            { id: 3, title: 'Breaking the Code', category: 'Programming', author: 'Tyrion Lannister', date: '22 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Master the code-breaking techniques in programming.' },
            { id: 4, title: 'Innovative UX Designs', category: 'UX/UI', author: 'Daenerys Targaryen', date: '23 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Exploring the latest trends in UX design.' },
            { id: 5, title: 'AI in Everyday Life', category: 'AI', author: 'Bran Stark', date: '24 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'AI is now part of our everyday life. Here\'s how.' },
            { id: 6, title: 'Cybersecurity in 2024', category: 'Cybersecurity', author: 'Sansa Stark', date: '25 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'The latest trends in keeping your data secure.' },
            { id: 7, title: 'Building Responsive Websites', category: 'Web Development', author: 'Robb Stark', date: '26 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'How to build responsive websites for all devices.' },
            { id: 8, title: 'JavaScript Frameworks: What\'s Hot', category: 'Programming', author: 'Samwell Tarly', date: '27 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Which JavaScript frameworks should you focus on in 2024?' },
            { id: 9, title: 'Cloud Computing Essentials', category: 'Cloud Computing', author: 'The Hound', date: '28 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'An introduction to cloud computing and its benefits.' },
            { id: 10, title: 'Digital Marketing in 2024', category: 'Marketing', author: 'Margaery Tyrell', date: '29 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'How to succeed in digital marketing in the coming years.' },
            { id: 11, title: 'The Future of E-commerce', category: 'Business', author: 'Cersei Lannister', date: '30 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Exploring the future of e-commerce and what to expect.' },
            { id: 12, title: 'Managing Teams Remotely', category: 'Leadership', author: 'Brienne of Tarth', date: '31 Jan 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Tips on managing remote teams effectively.' },
            { id: 13, title: 'Mobile App Development Trends', category: 'Mobile Development', author: 'Jorah Mormont', date: '1 Feb 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'Top mobile app development trends to follow in 2024.' },
            { id: 14, title: 'Exploring Blockchain Technology', category: 'Blockchain', author: 'Davos Seaworth', date: '2 Feb 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'How blockchain is changing the world of technology.' },
            { id: 15, title: 'Machine Learning in Healthcare', category: 'AI', author: 'Missandei', date: '3 Feb 2024', img: '../static/assets/images/wellnessDr.jpg', description: 'How machine learning is revolutionizing healthcare.' }
        ];


        const blogsPerPage = 9;
        let currentPage = 1;
        let totalPages = Math.ceil(blogData.length / blogsPerPage);

        function renderBlogs(page) {
            const blogContainer = document.getElementById('blog-container');
            blogContainer.innerHTML = ''; 

            const start = (page - 1) * blogsPerPage;
            const end = start + blogsPerPage;
            const blogsToShow = blogData.slice(start, end);

            // Render blog cards
            blogsToShow.forEach(blog => {
                const blogCard = `
            <a class="blog-card" href="blog.html">
                <img src="${blog.img}" class="blog-card-img">
                <div class="blog-card-content">
                    <p class="blog-category">${blog.category}</p>
                    <h1 class="card-heading">${blog.title}</h1>
                    <p class="">${blog.description}</p>
                    <div class="blog-author-container">
                        <div class="blog-author-details">
                            <h4 class="author-name">${blog.author}</h4>
                            <p class="blog-date">${blog.date}</p>
                        </div>
                    </div>
                </div>
            </a>
        `;
                blogContainer.insertAdjacentHTML('beforeend', blogCard);
            });
        }

        function renderPagination(page) {
            const paginationContainer = document.getElementById('pagination-container');
            paginationContainer.innerHTML = ''; 

            const prevButton = `
        <li>
            <a href="#" class="pagination-link rounded-s-lg border-e-0 ms-0 ${page === 1 ? 'disabled' : ''} " data-page="${page - 1}">
                <span class="sr-only">Previous</span>
                <svg class="pagination-arrow-icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
                </svg>
            </a>
        </li>
    `;
            paginationContainer.insertAdjacentHTML('beforeend', prevButton);

            // Page numbers
            let startPage = Math.max(1, page - 2);  
            let endPage = Math.min(totalPages, page + 2);  

            for (let i = startPage; i <= endPage; i++) {
                const pageButton = `
            <li>
                <a href="#" class="pagination-link ${i === page ? 'active' : ''}" data-page="${i}">${i}</a>
            </li>
        `;
                paginationContainer.insertAdjacentHTML('beforeend', pageButton);
            }

            const nextButton = `
        <li>
            <a href="#" class="pagination-link rounded-e-lg ${page === totalPages ? 'disabled' : ''}" data-page="${page + 1}">
                <span class="sr-only">Next</span>
                <svg class="pagination-arrow-icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                </svg>
            </a>
        </li>
    `;
            paginationContainer.insertAdjacentHTML('beforeend', nextButton);
        }

        function handlePaginationClick(e) {
            const link = e.target.closest('a.pagination-link'); 
            if (!link) return;

            const page = Number(link.getAttribute('data-page'));

            if (!isNaN(page) && page >= 1 && page <= totalPages) {
                currentPage = page;
                renderBlogs(currentPage);
                renderPagination(currentPage);
            }
        }

        renderBlogs(currentPage);
        renderPagination(currentPage);

        document.getElementById('pagination-container').addEventListener('click', (e) => {
            handlePaginationClick(e);
        });
    </script>

    {% include 'footer.html' %}
    <script src="{% static 'scripts/whatsapp.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="{% static 'scripts/swiper.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

</body>

</html>